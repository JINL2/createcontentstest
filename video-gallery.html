<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Gallery | Contents Helper</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="video-gallery.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
</head>
<body>
    <!-- Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p class="loading-text">ƒêang t·∫£i...</p>
        </div>
    </div>

    <!-- ÏÑ±Í≥µ/Ïò§Î•ò ÌÜ†Ïä§Ìä∏ -->
    <div class="toast error-toast" id="errorToast" style="display: none;">
        <div class="toast-content">
            <span class="error-icon">‚ö†Ô∏è</span>
            <span class="error-message"></span>
            <button class="toast-close" onclick="closeError()">√ó</button>
        </div>
    </div>

    <div class="toast success-toast" id="successToast" style="display: none;">
        <div class="toast-content">
            <span class="success-icon">‚úÖ</span>
            <span class="success-message"></span>
        </div>
    </div>

    <!-- Ìó§Îçî -->
    <header class="gallery-header">
        <div class="header-container">
            <div class="header-left">
                <a href="index.html" class="back-button">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">Quay l·∫°i</span>
                </a>
                <h1 class="header-title">üé¨ Th∆∞ vi·ªán Video</h1>
            </div>
            <div class="header-right">
                <div class="user-stats-mini">
                    <span class="stat-item">‚≠ê <span id="userPoints">0</span></span>
                    <span class="stat-item">üèÜ C·∫•p <span id="userLevel">1</span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
    <main class="gallery-main">
        <!-- ÌïÑÌÑ∞ ÏÑπÏÖò -->
        <section class="filter-section">
            <div class="filter-container">
                <div class="filter-tabs">
                    <button class="filter-tab active" onclick="switchGalleryTab('all')">
                        <span class="tab-icon">üé•</span>
                        <span class="tab-text">T·∫•t c·∫£</span>
                    </button>
                    <button class="filter-tab" onclick="switchGalleryTab('my-videos')">
                        <span class="tab-icon">üë§</span>
                        <span class="tab-text">Video c·ªßa t√¥i</span>
                    </button>
                    <button class="filter-tab" onclick="switchGalleryTab('popular')">
                        <span class="tab-icon">üî•</span>
                        <span class="tab-text">Ph·ªï bi·∫øn</span>
                    </button>
                    <button class="filter-tab" onclick="switchGalleryTab('recent')">
                        <span class="tab-icon">üÜï</span>
                        <span class="tab-text">M·ªõi nh·∫•t</span>
                    </button>
                </div>

                <div class="filter-options">
                    <select id="categoryFilter" class="filter-select" onchange="applyFilters()">
                        <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                        <option value="ÏùºÏÉÅ">ÏùºÏÉÅ (Cu·ªôc s·ªëng)</option>
                        <option value="ÏùåÏãù">ÏùåÏãù (·∫®m th·ª±c)</option>
                        <option value="Ìå®ÏÖò">Ìå®ÏÖò (Th·ªùi trang)</option>
                        <option value="Î∑∞Ìã∞">Î∑∞Ìã∞ (L√†m ƒë·∫πp)</option>
                        <option value="Ïó¨Ìñâ">Ïó¨Ìñâ (Du l·ªãch)</option>
                        <option value="Ï†ïÎ≥¥">Ï†ïÎ≥¥ (Th√¥ng tin)</option>
                    </select>

                    <select id="ratingFilter" class="filter-select" onchange="applyFilters()">
                        <option value="">T·∫•t c·∫£ ƒë√°nh gi√°</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 sao</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ sao</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê 3+ sao</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ÌÜµÍ≥Ñ ÏÑπÏÖò -->
        <section class="stats-section">
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">üé¨</div>
                    <div class="stat-value" id="totalVideos">0</div>
                    <div class="stat-label">T·ªïng video</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value" id="totalCreators">0</div>
                    <div class="stat-label">Ng∆∞·ªùi s√°ng t·∫°o</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-value" id="avgRating">0</div>
                    <div class="stat-label">ƒê√°nh gi√° TB</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí°</div>
                    <div class="stat-value" id="customIdeas">0</div>
                    <div class="stat-label">√ù t∆∞·ªüng t√πy ch·ªânh</div>
                </div>
            </div>
        </section>

        <!-- Í∞§Îü¨Î¶¨ Í∑∏Î¶¨Îìú -->
        <section class="gallery-section">
            <div class="gallery-container" id="galleryContainer">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>ƒêang t·∫£i video...</p>
                </div>
            </div>

            <!-- ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº -->
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="btn btn-secondary" onclick="loadMoreVideos()">
                    Xem th√™m video
                </button>
            </div>
        </section>
    </main>

    <!-- ÎπÑÎîîÏò§ ÏÉÅÏÑ∏ Î™®Îã¨ -->
    <div class="modal-overlay" id="videoDetailModal" onclick="closeVideoDetail(event)">
        <div class="modal-content video-detail-modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeVideoDetail()">√ó</button>
            
            <div class="video-detail-container">
                <div class="video-player-section">
                    <video id="modalVideo" controls></video>
                </div>
                
                <div class="video-info-section">
                    <div class="video-header">
                        <h2 id="modalVideoTitle"></h2>
                        <div class="video-meta">
                            <span class="meta-item">
                                <span class="meta-icon">üë§</span>
                                <span id="modalCreator"></span>
                            </span>
                            <span class="meta-item">
                                <span class="meta-icon">üìÖ</span>
                                <span id="modalDate"></span>
                            </span>
                            <span class="meta-item">
                                <span class="meta-icon">üìÅ</span>
                                <span id="modalCategory"></span>
                            </span>
                        </div>
                    </div>

                    <div class="video-description">
                        <p id="modalDescription"></p>
                    </div>

                    <div class="video-tags" id="modalTags"></div>

                    <div class="rating-section">
                        <h3>ƒê√°nh gi√° video n√†y</h3>
                        <div class="rating-stars" id="ratingStars">
                            <span class="star" data-rating="1">‚òÜ</span>
                            <span class="star" data-rating="2">‚òÜ</span>
                            <span class="star" data-rating="3">‚òÜ</span>
                            <span class="star" data-rating="4">‚òÜ</span>
                            <span class="star" data-rating="5">‚òÜ</span>
                        </div>
                        <div class="current-rating">
                            <span>ƒê√°nh gi√° hi·ªán t·∫°i: </span>
                            <span id="currentRating">Ch∆∞a c√≥</span>
                        </div>
                        <div class="total-ratings">
                            <span id="totalRatings">0</span> ƒë√°nh gi√°
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="shareVideo()">
                            <span class="btn-icon">üì§</span>
                            Chia s·∫ª
                        </button>
                        <button class="btn btn-secondary" onclick="downloadVideo()">
                            <span class="btn-icon">‚¨áÔ∏è</span>
                            T·∫£i xu·ªëng
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="video-gallery.js"></script>
</body>
</html>